<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.ex.mapper.AdminStatTaskMapper">

<select id="getJoinUserCount" resultType="int">
	select count(username) from tbl_member where regdate > #{date}
</select>

<select id="getLeaveUserCount" resultType="int">
	select count(username) from tbl_member where leave_date > #{date} and leave_flag = '1'
</select>

<select id="getPostCount" resultType="int">
	select count(bno) from tbl_board where regdate > #{date}
</select>
	
<insert id="createUserStat">
	insert into tbl_user_stat(today, join_cnt, leave_cnt, post_cnt) 
	values(#{today}, #{join_cnt}, #{leave_cnt}, #{post_cnt})
</insert>

</mapper>
